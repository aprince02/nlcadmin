<%- include("_loggedInHeader") -%>

<h1 class="display-5">Update Users</h1>
<a class="btn btn-sm btn-success" href="/register">Add User</a>
<div class="table-wrapper">
  <div class="table-column">
    <table class="table table-hover table-sm custom-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
        </tr>
      </thead>
      <tbody>
        <% for (const user of users) { %>
          <tr>
            <form action="/update-users" method="post">
              <td><input readonly type="text" style="width: 50px;" autofocus class="form-control" name="id" value="<%= user.id %>" /></td>
              <td><input type="text" style="width: 200px;" autofocus class="form-control" name="name" value="<%= user.name %>" /></td>
              <td><input type="email" style="width: 325px;" autofocus class="form-control" name="email" value="<%= user.email %>" /></td>
              <td>
                <select required class="form-control" style="max-width: fit-content;" name="role" id="role">
                  <option value="super admin" <%= user.role === 'super admin' ? 'selected' : '' %>>Super Admin</option>
                  <option value="admin" <%= user.role === 'admin' ? 'selected' : '' %>>Admin</option>
                  <option value="user" <%= user.role === 'user' ? 'selected' : '' %>>User</option>
                </select>
              </td>
              <td>
                <div class="form-horizontal">
                  <div class="form-group row">
                    <div class="col-sm-10">
                      <input type="submit" value="Save" class="btn btn-default btn-success" />
                    </div>
                  </div>
                </div>
              </td>
            </form>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>
<%- include("_loggedInFooter") -%>